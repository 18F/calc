language: python
python:
- 3.4
addons:
  postgresql: 9.3
matrix:
  fast_finish: true
before_install:
  - pip install codecov
after_success:
  - codecov
install:
- pip install -r requirements.txt
script:
- phantomjs --version
# See https://github.com/18F/calc/issues/330 for details on why
# we're ignoring selenium tests.
- py.test --ignore=selenium_tests
env:
  global:
    - PHANTOMJS_TIMEOUT=15
    - DEBUG=yup
    - DATABASE_URL=postgres://postgres@localhost/hourglass
notifications:
  email: false
deploy:
  edge: true
  provider: cloudfoundry
  username: deploy-hourglass
  password:
    secure: RP8TOaPeKnG+MPAL7+2iDh5YAS2uOL+8R4Can1zsz+itgGjATkCYKvuIq2ADHDaRHaP4PQUuDBuGAA2E620Zxon5+VP/ntwJzOZvntYyC/uXUK0+YnBNu/vMlxfq+vky+GPfCNStlrqNWW7SDAYU5fJP4MvxllXt3bOsi5gOfIw=
  api: https://api.18f.gov
  organization: oasis
  space: calc-dev
  on:
    branch: master
sudo: required
