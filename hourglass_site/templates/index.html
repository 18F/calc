{% extends "base.html" %}
{% load staticfiles %}

{% block head %}
<script src="{% static 'hourglass_site/js/vendor/jquery.auto-complete.min.js' %}"></script>
<link rel="stylesheet" href="{% static 'hourglass_site/style/index.css' %}">
{% endblock %}

{% block body %}
<form id="search" class="search" role="form">
  <input type="hidden" name="sort" value="current_price">
  <input type="hidden" name="exclude" value="">

  <section class="search">
    <div class="container">
      <div class="row">
        <div class="six columns">
          <input id="labor_category" name="q" placeholder="Type a labor category" class="search u-full-width" type="text">
          <div id="query-types">
            <label><input type="radio" name="query_type" value="match_all" checked> contains words</label>
            <label><input type="radio" name="query_type" value="match_phrase"> contains phrase</label>
            <label><input type="radio" name="query_type" value="match_exact"> exact match</label>
          </div>
        </div>
        <div class="six columns">
          <button id="submit-button" class="submit button-primary">Search</button>
          <input id="reset-button" class="reset button" type="reset" value="Clear search">
        </div>
      </div><!-- /.row -->
    </div><!-- /.container -->
  </section><!-- /.search -->

  <section class="filters">
    <div class="container">
      <h4>Optional Filters</h4>

      <div class="row">
        <div class="filter three columns">
          <label for="min_education">Min. Education Level:</label>
          <select id="min_education" name="min_education">
            <option value="">(none)</option>
            <option value="HS">High School</option>
            <option value="AA">Associates</option>
            <option value="BA">Bachelors Degree</option>
            <option value="MA">Masters Degree</option>
            <option value="PHD">Ph.D</option>
          </select>
        </div>

        <div class="filter three columns">
          <label for="min_experience">Min. Experience:</label>
          <input id="min_experience" name="min_experience" type="text" placeholder="0">
          years
        </div>

        <div class="filter three columns">
          <label for="site">Worksite:</label>
          <select id="site" name="site">
            <option value="">(all)</option>
            <option>customer</option>
            <option>contractor</option>
            <option>both</option>
          </select>
        </div>

        <div class="filter three columns">
          <label for="business_size">Business Size:</label>
          <select id="business_size" name="business_size">
            <option value="">(all)</option>
            <option value="s" data-label="small">small business</option>
            <option value="o">other than small</option>
          </select>
        </div>

        <div class="filter twelve columns">
          <label for="price">Only search &amp; show prices:</label>
          from <span class="dollars">$</span><input id="price__gte" name="price__gte" type="text" class="price" placeholder="0">
          to <span class="dollars">$</span><input id="price__lte" name="price__lte" type="text" class="price" placeholder="&infin;">
        </div>

        <!--
        <div class="filter">
          <label for="schedule">Schedule:</label>
          <select id="schedule" name="schedule">
            <option value="">(all)</option>
            <option>Environmental</option>
            <option>AIMS</option>
            <option>Logistics</option>
            <option>Language Services</option>
            <option>PES</option>
            <option>MOBIS</option>
            <option>Consolidated</option>
          </select>
        </div>
        -->

        <!--
        <div class="filter">
          <label for="fiscal_year">Fiscal Year:</label>
          <select id="fiscal_year" name="fiscal_year">
          </select>
        </div>
        -->

      </div><!-- /.row -->
    </div><!-- /.container -->
  </section><!-- /.filters  -->

  <section class="results">
    <div class="container">
      <div class="row">
        <p id="description" class="nine columns">
          Showing <span data-key="count">0</span> of
          <span id="results-count" class="total" data-key="total">0</span>
          <span data-key="results">results</span>
          <span class="filters">
            <span class="not-empty">with</span>
          </span>
        </p>
        <div id="results-actions" class="three columns">
          <a id="export-data" class="button button-primary"
            title="Click to export your search results to an Excel file (CSV)" href="/api/rates/csv/">â¬‡ Export Data</a>
        </div>
      </div>

      <h4>Price Stats</h4>

      <div class="graph">
        <svg id="price-histogram" class="graph histogram has-data">
        </svg>
      </div>

      <div class="loading-indicator">
        <p class="message">Loading results...</p>
        <div class="error-message"></div>
      </div>

      <table id="results-table" class="results has-data">
        <thead>
          <tr>
            <th scope="col" class="exclude" data-key="exclude" data-format=""><a id="restore-excluded" class="restore merge-params" href="?exclude="></a></th>
            <th scope="col" class="sortable" data-key="labor_category">Labor Category</th>
            <th scope="col" class="sortable" data-key="education_level">Min Edu.</th>
            <th scope="col" class="sortable" data-key="min_years_experience">Experience&nbsp;(years)</th>
            <th scope="col" class="sortable" data-key="current_price" data-format="$%,.02f">Price</th>
            <th scope="col" data-key="idv_piid">Contract #</th>
            <th scope="col" data-key="vendor_name">Vendor</th>
            <th scope="col" class="sortable collapsible collapsed" data-key="schedule">Schedule</th>
          </tr>
        </thead>
        <tfoot>
          <tr>
            <td colspan="8">
              <a href="#results-table">Return to the top</a>
            </td>
        </tfoot>
        <tbody>
        </tbody>
      </table>

    </div><!-- /.container -->
  </section><!-- /.graphs -->

</form>

<script src="{% static 'hourglass_site/js/index.js' %}"></script>
{% endblock %}
